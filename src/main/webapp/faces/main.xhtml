<html lang="en"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

<h:head>
    <meta charset="UTF-8"/>
    <title>3 лаба</title>

    <link rel="icon" type="image/x-icon" href="../static/favicon.ico"/>
    <link rel="stylesheet" type="text/css" href="../resources/css/style.css"/>

    <link rel="preconnect" href="https://fonts.googleapis.com"/>
    <link rel="preconnect" href="https://fonts.gstatic.com"/>
    <link href="https://fonts.googleapis.com/css2?family=Edu+AU+VIC+WA+NT+Guides:wght@400..700&amp;family=Gowun+Batang:wght@400;700&amp;display=swap"
          rel="stylesheet"/>
</h:head>

<h:body>
    <div class="wrapp">
        <h:link styleClass="hat btn gowun-batang-bold label link-btn" value="Назад" outcome="time" />
        <h:form styleClass="main gowun-batang-regular">
            <div class="X" id="X">
                <div>
                    <label for="X" class="text">X = </label>
                    <h:outputText id="Xval" styleClass="textForX" value="#{formBean.x}"/>
                </div>
                <div class="wrapper">
                    <h:commandLink id="x-3" value="-3" styleClass="button-link" action="#{formBean.x}">
                        <f:ajax execute="@this" render="Xval"/>
                        <f:setPropertyActionListener target="#{formBean.x}" value="-3"/>
                    </h:commandLink>
                </div>
                <div class="wrapper">
                    <h:commandLink id="x-2" value="-2" styleClass="button-link">
                        <f:ajax execute="@this" render="Xval"/>
                        <f:setPropertyActionListener target="#{formBean.x}" value="-2"/>
                    </h:commandLink>
                </div>
                <div class="wrapper">
                    <h:commandLink id="x-1" value="-1" styleClass="button-link">
                        <f:ajax execute="@this" render="Xval"/>
                        <f:setPropertyActionListener target="#{formBean.x}" value="-1"/>
                    </h:commandLink>
                </div>
                <div class="wrapper">
                    <h:commandLink id="x0" value="0" styleClass="button-link">
                        <f:ajax execute="@this" render="Xval"/>
                        <f:setPropertyActionListener target="#{formBean.x}" value="0"/>
                    </h:commandLink>
                </div>
                <div class="wrapper">
                    <h:commandLink id="x1" value="1" styleClass="button-link">
                        <f:ajax execute="@this" render="Xval"/>
                        <f:setPropertyActionListener target="#{formBean.x}" value="1"/>
                    </h:commandLink>
                </div>
                <div class="wrapper">
                    <h:commandLink id="x2" value="2" styleClass="button-link">
                        <f:ajax execute="@this" render="Xval"/>
                        <f:setPropertyActionListener target="#{formBean.x}" value="2"/>
                    </h:commandLink>
                </div>
                <div class="wrapper">
                    <h:commandLink id="x3" value="3" styleClass="button-link">
                        <f:ajax execute="@this" render="Xval"/>
                        <f:setPropertyActionListener target="#{formBean.x}" value="3"/>
                    </h:commandLink>
                </div>
                <div class="wrapper">
                    <h:commandLink id="x4" value="4" styleClass="button-link">
                        <f:ajax execute="@this" render="Xval"/>
                        <f:setPropertyActionListener target="#{formBean.x}" value="4"/>
                    </h:commandLink>
                </div>
                <div class="wrapper">
                    <h:commandLink id="x5" value="5" styleClass="button-link">
                        <f:ajax execute="@this" render="Xval"/>
                        <f:setPropertyActionListener target="#{formBean.x}" value="5"/>
                    </h:commandLink>
                </div>
            </div>
            <div class="Y" id="Y">
                <label for="Y" class="text">Y</label>
                <h:inputText id="textY" class="textInput"
                             value="#{formBean.y}"
                             required="true"
                             pt:placeholder="-3...5" />
            </div>
            <div class="R" id="R">
                <label for="R" class="text">R</label>
                <h:inputText id="textR" class="textInput"
                             value="#{formBean.r}"
                             required="true"
                             pt:placeholder="1...4"
                             pt:oninput="updateShapes(this.value)"/>
            </div>
            <h:commandButton id="submitButton" value="Посчитать" class="btn gowun-batang-bold label"
                             action="#{formBean.submit()}" onclick="validateButtons()">
                <f:ajax render="table" execute="@form"/>
            </h:commandButton>
        </h:form>

        <div class="picture" id="graph">
            <svg id="pic" width="500" height="500" >
                <rect id="rect" class="figure" x="0" y="0" width="0" height="0" fill="rgba(209, 217, 230, 0.80)"/>
                <path id="arc" class="figure" d=""
                      fill="rgba(209, 217, 230, 0.80)"/>

                <polygon class="figure" points="" fill="rgba(209, 217, 230, 0.80)" data-name="triangle"/>

                <line class="axis" x1="250" x2="260" y1="0" y2="15"/>
                <line class="axis" x1="250" x2="240" y1="0" y2="15"/>
                <line class="axis" x1="250" x2="250" y1="0" y2="500"/>

                <line class="axis" x1="485" x2="500" y1="240" y2="250"/>
                <line class="axis" x1="485" x2="500" y1="260" y2="250"/>
                <line class="axis" x1="0" x2="500" y1="250" y2="250"/>

                <line class="axis" x1="50" x2="50" y1="240" y2="260"/>
                <line class="axis" x1="100" x2="100" y1="240" y2="260"/>
                <line class="axis" x1="150" x2="150" y1="240" y2="260"/>
                <line class="axis" x1="200" x2="200" y1="240" y2="260"/>
                <line class="axis" x1="300" x2="300" y1="240" y2="260"/>
                <line class="axis" x1="350" x2="350" y1="240" y2="260"/>
                <line class="axis" x1="400" x2="400" y1="240" y2="260"/>
                <line class="axis" x1="450" x2="450" y1="240" y2="260"/>

                <line class="axis" x1="240" x2="260" y1="50" y2="50"/>
                <line class="axis" x1="240" x2="260" y1="100" y2="100"/>
                <line class="axis" x1="240" x2="260" y1="150" y2="150"/>
                <line class="axis" x1="240" x2="260" y1="200" y2="200"/>
                <line class="axis" x1="240" x2="260" y1="300" y2="300"/>
                <line class="axis" x1="240" x2="260" y1="350" y2="350"/>
                <line class="axis" x1="240" x2="260" y1="400" y2="400"/>
                <line class="axis" x1="240" x2="260" y1="450" y2="450"/>

                <text x="485" y="230" font-weight="bold">X</text>
                <text x="270" y="15" font-weight="bold">Y</text>


                <text x="35" y="235">-4</text>
                <text x="85" y="235">-3</text>
                <text x="135" y="235">-2</text>
                <text x="185" y="235">-1</text>
                <text x="295" y="235">1</text>
                <text x="345" y="235">2</text>
                <text x="395" y="235">3</text>
                <text x="445" y="235">4</text>

                <text x="265" y="55">4</text>
                <text x="265" y="105">3</text>
                <text x="265" y="155">2</text>
                <text x="265" y="205">1</text>
                <text x="265" y="305">-1</text>
                <text x="265" y="355">-2</text>
                <text x="265" y="405">-3</text>
                <text x="265" y="455">-4</text>

                <circle class="answerDot" cx="100" cy="100" r="0" fill="black"/>
            </svg>
        </div>
        <p:dataTable value="#{points.points}" var="point" id="table"
                     styleClass="custom-table" emptyMessage="Нет данных" update="@form">
            <p:column headerText="X" styleClass="custom-column">
                <h:outputText value="#{point.x}"/>
            </p:column>
            <p:column headerText="Y" styleClass="custom-column">
                <h:outputText value="#{point.y}"/>
            </p:column>
            <p:column headerText="R" styleClass="custom-column">
                <h:outputText value="#{point.r}"/>
            </p:column>
            <p:column headerText="Попадание" styleClass="custom-column">
                <h:outputText value="#{point.getisHit() ? 'да' : 'нет'}"
                              style="color: #{point.getisHit() ? 'green' : 'red'}"/>
            </p:column>
        </p:dataTable>
    </div>
    <script src="../js/dravfigure.js"></script>
    <script src="../js/validateAndSend.js"></script>
</h:body>

</html>